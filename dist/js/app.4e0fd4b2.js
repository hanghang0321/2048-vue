(function(t){function e(e){for(var r,a,s=e[0],h=e[1],c=e[2],l=0,f=[];l<s.length;l++)a=s[l],o[a]&&f.push(o[a][0]),o[a]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var h=n[s];0!==o[h]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=h;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v("2048")]),n("h4",[t._v("当前总分： "+t._s(t.total))]),n("div",{staticClass:"main",on:{touchstart:t.touchstart,touchend:t.touchend}},t._l(t.arr,function(e,r){return n("div",{key:r,staticClass:"row"},t._l(e,function(e,r){return n("div",{key:r,class:"c-"+e+" item"},[t._v(t._s(e>0?e:""))])}),0)}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:this.messageShow,expression:"this.messageShow"}],staticClass:"message"},[n("div",[t._v(t._s(t.message))])])])},i=[],a=(n("ac6a"),n("01c8")),s={name:"app",data:function(){return{startClientX:0,startClientY:0,arr:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Copyarr:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],haveGroupingArr:[[],[],[],[]],initData:[],haveGrouping:!1,itIsLeft:!1,endGap:!0,middleGap:!0,haveZero:!0,total:0,message:"1351",messageShow:!1}},methods:{touchstart:function(t){console.log("start"),this.startClientX=t.changedTouches[0].clientX,this.startClientY=t.changedTouches[0].clientY},touchend:function(t){console.log("end");var e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,r=Math.abs(this.startClientX-e),o=Math.abs(this.startClientY-n),i=0;switch(i=r>o?this.startClientX>e?37:39:this.startClientY>n?38:40,i){case 37:console.log("←"),this.command(i);break;case 38:console.log("↑"),this.command(i);break;case 39:this.command(i),console.log("→");break;case 40:console.log("↓"),this.command(i);break}},command:function(t){this.WhetherToRotate(t),this.Init(),this.IfInvalid(),this.Rendering(t),this.RandomlyCreate()},WhetherToRotate:function(t){if(38===t||40===t)this.Copyarr=this.ToRotate(this.arr);else if(37===t||39===t){var e=Object(a["a"])(this.arr);this.Copyarr=e.slice(0)}37===t||38===t?this.itIsLeft=!0:39!==t&&40!==t||(this.itIsLeft=!1)},Init:function(){this.initData=this.DataDetails(),this.Copyarr=this.NumberMerger()},IfInvalid:function(){this.MiddleGap(),this.EndPointGap(),this.itIshuave()},Rendering:function(t){this.AddZero(),38!==t&&40!==t||(this.Copyarr=this.ToRotate(this.Copyarr)),console.log("中间有空隙吗？ ".concat(this.middleGap?"有":"没有")),console.log("有可合并数字吗？ ".concat(this.haveGrouping?"有":"没有")),console.log("最边上有空隙吗？ ".concat(this.endGap?"有":"没有")),this.arr=this.Copyarr},RandomlyCreate:function(){var t=this;if(this.haveGrouping||this.endGap||this.middleGap){var e=this.Copyarr,n=[],r=0,o=0;e.forEach(function(t,e){t.forEach(function(t,r){0===t&&n.push({x:e,y:r})})}),n.length&&(r=Math.floor(Math.random()*n.length),o=Math.floor(10*Math.random())%3===0?4:2,this.Copyarr[n[r].x][n[r].y]=o),this.arr=this.Copyarr,this.total=0,this.Copyarr.forEach(function(e){e.forEach(function(e){t.total+=e,2048===e&&(t.message="恭喜成功达成2048",t.messageShow=!0)})})}else this.haveGrouping||this.endGap||this.middleGap||(this.message="抱歉失败了",this.messageShow=!0)},DataDetails:function(){var t=this,e=[],n=[];this.haveZero=!1,this.Copyarr.forEach(function(n,r){n.forEach(function(n,o){0!==n&&e.push({row:r,col:o,content:n}),0===n&&(t.haveZero||(t.haveZero=!0))})});for(var r=function(t){n[t]=e.filter(function(e){return e.row===t})},o=0;o<this.Copyarr.length;o++)r(o);return n},NumberMerger:function(){var t=[[],[],[],[]],e=[[],[],[],[]];if(this.initData.forEach(function(t,n){t.forEach(function(t,r){e[n][r]=t.content})}),this.haveGroupingArr=e,t=[[],[],[],[]],this.itIsLeft)for(var n=0;n<e.length;n++){var r=[],o=0;while(o<e[n].length)e[n][o]===e[n][o+1]?(r.push(e[n][o]+e[n][o+1]),o+=2):(r.push(e[n][o]),o++);t[n]=r}else for(var i=0;i<e.length;i++){var a=[],s=e[i].length-1;while(s>=0)e[i][s]===e[i][s-1]?(a.push(e[i][s]+e[i][s-1]),s-=2):(a.push(e[i][s]),s--);t[i]=a}return t},MiddleGap:function(){var t=[[],[],[],[]],e=[];this.initData.forEach(function(e,n){e.forEach(function(r,o){"undefined"!==typeof e[o+1]&&t[n].push(r.col-e[o+1].col)})}),t.forEach(function(t){e.push(t.reduceRight(function(t,e){return t+e},0))}),e=e.map(function(e,n){return Math.abs(e/t[n].length)}),e.some(function(t){return t>1}),this.middleGap=e.some(function(t){return t>1})},EndPointGap:function(){var t;this.endGap=!0;var e=this.initData;this.itIsLeft?(t=0,this.endGap=e.some(function(e){return 0!==e.length&&e[0].col!==t})):(t=3,this.endGap=e.some(function(e){return 0!==e.length&&e[e.length-1].col!==t}))},AddZero:function(){for(var t=this.Copyarr,e=0;e<t.length;e++){this.itIsLeft||t[e].reverse();while(t[e].length!==this.arr[0].length)this.itIsLeft?t[e].push(0):t[e].unshift(0)}this.Copyarr=t},ToRotate:function(t){for(var e=[[],[],[],[]],n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)e[n][r]=t[r][n];return e},itIshuave:function(){this.haveGrouping=!1;for(var t=this.haveGroupingArr,e=0;e<t.length;e++){var n=0;while(n<t[e].length)t[e][n]===t[e][n+1]?(n+=2,this.haveGrouping=!0):n++}t=this.ToRotate(t);for(var r=0;r<t.length;r++){var o=t[r].length-1;while(o>=0)t[r][o]===t[r][o-1]?(o-=2,this.haveGrouping=!0):o--}}},mounted:function(){var t=this;this.RandomlyCreate(),window.onkeydown=function(e){switch(e.keyCode){case 37:t.command(e.keyCode);break;case 38:t.command(e.keyCode);break;case 39:t.command(e.keyCode);break;case 40:t.command(e.keyCode);break}}}},h=s,c=(n("7faf"),n("2877")),u=Object(c["a"])(h,o,i,!1,null,null,null);u.options.__file="App.vue";var l=u.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(l)}}).$mount("#app")},"7faf":function(t,e,n){"use strict";var r=n("8fba"),o=n.n(r);o.a},"8fba":function(t,e,n){}});
//# sourceMappingURL=app.4e0fd4b2.js.map